{% extends "tasks/layouts/layout.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}

<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
      <div class="card card-primary" style="margin:1% 10% 0% 10%" id="testapp">
          <div class="card-header">
            <div class="form-row">
              <div class="col-sm-6">
                <div class="form-group">
                  <h3 class="card-title"><b>Evento</b></h3>
                </div>
            </div>
              <div class="col-sm-3">
                  <div class="form-group">
                    <h3 class="card-title"><b>Data Registro:</b> {{today}}</h3>
                  </div>
              </div>
              <div class="col-sm-3">
                  <div class="form-group">
                    <h3 class="card-title"><b>Responsavel:</b> {{request.user}} </h3>
                  </div>
              </div>
            </div>
            
          </div>

          <!-- /.card-header -->
          <!-- form start -->
          <form role="form">
            <div class="card-body">
              <div class="form-row">
                <div class="col-sm-6">
                    <div class="form-group">
                      
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                      
                    </div>
                </div>
            </div>
            <div class="form-row">
              

              <div class="col-sm-4">
                <div class="form-group">
                  <label for="type">Empresa:</label>
                  <select name="empresa" id="empresa" class="select form-control">
                    <option v-for="option in assunto_options">[[option]]</option>
                  </select>
                </div>
                
              </div>
              <div class="col-sm-4">
                <div class="form-group">
                  {{ form.cpf|as_crispy_field }}
                </div>
                
              </div>
              <div class="col-sm-4">
                <div class="form-group">
                    {{ form.nome_cliente|as_crispy_field }}
                  </div>
              </div>
          </div>

            <div class="form-row">
                  <div class="col-sm-4">
                      <div class="form-group">
                        {{ form.data_ocorrido|as_crispy_field }}
                      </div>
                    </div>
                  <div class="col-sm-4">
                      <div class="form-group">
                          {{ form.data_relato|as_crispy_field }} 
                      </div>
                  </div>
                  <div class="col-sm-4">
                    <div class="form-group">
                        {{ form.horario|as_crispy_field }} 
                    </div>
                </div>
            </div>
               
              <div class="form-row">
                
                <div class="col-sm-4">
                    <div class="form-group">
                      {{ form.telefone|as_crispy_field }}
                    </div>
                </div>
                <div class="col-sm-12">
                  <div class="form-group">
                    {{ form.relato|as_crispy_field }}
                  </div>
                  
                </div>
                <div class="col-sm-12">
                  <div class="form-group">
                    {{ form.detalhes|as_crispy_field }}
                  </div>
                </div>
              </div>
              <div class="form-row">
                
                <div class="col-sm-4">
                    <div class="form-group">
                      <label> Imagens: </label>
                      <input required name="images" type="file" multiple class="form-control-file">
                    </div>
                
              </div>
                
            </div>
            <!-- /.card-body -->
            
            <div class="card-footer">
              <input type="hidden" name="responsavel" value="{{responsavel}}" maxlength="30" required id="id_responsavel">
              <!-- <input type="hidden" name="nome" value="{{responsavel}}" maxlength="30" required id="id_responsavel">
              <input type="hidden" name="data_abertura" value={{date}} required id="id_data_abertura"> 
              <input type="hidden" name="protocolo" value= {{protocolo}} maxlength="30" required id="id_protocolo">
              <input type="hidden" name="id_ligacao" value= "123" maxlength="30" required id="id_id_ligacao">
              <input type="hidden" name="tipo" :value= "key" maxlength="30" required id="id_tipo">
              <input type="hidden" name="assunto" :value= "key_as" maxlength="30" required id="id_assunto">
               -->
              <!-- <input type="hidden" name="email" value= "gagudee@gmail.com" maxlength="30" required id="id_email">
              --><button type="submit" class="btn btn-primary">Submit</button> 
              <a class="btn btn-secondary float-right" href="{% url 'index' %}">Voltar ao In√≠cio</a>
            </div>
          </form>
        </div>   
        <script src="//unpkg.com/vue"></script>
        <script src="//unpkg.com/laue"></script>
        <script>
          new Vue({
              el: '#testapp',
              delimiters: ['[[', ']]'], 
              data: {
                  assunto_options : [ 
                    {%if profile_cargo == "Cliente" %}
                      "{{user.profile.empresa}}",
                    {% else %}
                     {% for empresa in empresas %}
                        '{{empresa.name}}',
                     {%endfor%}
                    {% endif %}
                    ],
              },
              
              

            })
            
        </script>


{% endblock content %}